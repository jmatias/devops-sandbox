---
apiVersion: eksctl.io/v1alpha5
kind: ClusterConfig


metadata:
  name: flux-helm-op
  region: us-east-1

nodeGroups:
  - name: ng-1
    instanceType: m5.large
    desiredCapacity: 2
    iam:
      withAddonPolicies:
        imageBuilder: true
        autoScaler: true
        externalDNS: true
        certManager: true
        appMesh: true
        ebs: true
        fsx: true
        efs: true
        albIngress: true
        xRay: true
        cloudWatch: true


iam:
  withOIDC: true
  serviceAccounts:
    - metadata:
        name: eksctl-sa
        namespace: kube-system
      attachPolicyARNs:
        - "arn:aws:iam::aws:policy/AmazonS3ReadOnlyAccess"
        - "arn:aws:iam::aws:policy/SecretsManagerReadWrite"


git:
  repo:
    url: "git@github.com:jmatias/eks-sandbox.git"
    branch: master
    fluxPath: "flux/"
  operator:
    namespace: "flux"
    withHelm: true
